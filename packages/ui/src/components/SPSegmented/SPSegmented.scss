@use '@theme/src/material/tools' as tools;

// Merged styles for Segmented Group + Item
@include tools.layer('components') {
  // Group wrapper (outer container)
  .sp-segmented-group {
    position: relative;
    display: inline-flex;
    align-items: stretch;
    border-radius: 9999px;
    padding: 4px;
    box-sizing: border-box;
    --sp-segmented-color: rgb(var(--sp-theme-primary));
    color: var(--sp-segmented-color);
  }

  // Variants (group container)
  .sp-segmented-group--variant-filled {
    background: rgba(0, 0, 0, 0.04);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06), 0 2px 6px rgba(0, 0, 0, 0.04);
  }

  .sp-segmented-group--variant-outlined {
    background: transparent;
    box-shadow: none;
    outline: 1px solid rgba(0, 0, 0, 0.12);
    outline-offset: 0;
  }

  .sp-segmented-group--variant-solo {
    background: #fff;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 4px 12px rgba(0, 0, 0, 0.08);
  }

  // Variants
  .sp-segmented-group--variant-filled {
    background: rgba(0, 0, 0, 0.04);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06), 0 2px 6px rgba(0, 0, 0, 0.04);
  }

  .sp-segmented-group--variant-outlined {
    background: transparent !important;
    box-shadow: none !important;
    outline: 1px solid rgba(0, 0, 0, 0.12);
    outline-offset: 0;
  }

  .sp-segmented-group--variant-solo {
    background: #fff !important;
    // a bit stronger elevation
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 4px 12px rgba(0, 0, 0, 0.08) !important;
  }

  .sp-segmented-group__controls {
    display: inline-flex;
    gap: 0;
    align-items: center;
  }

  // Sliding thumb
  .sp-segmented__thumb {
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 9999px;
    background: var(--sp-segmented-color);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.06);
    transition: transform 180ms cubic-bezier(0.2, 0, 0, 1), width 180ms, height 180ms, opacity 120ms;
    opacity: 0;
    pointer-events: none;
  }

  // outlined: hollow thumb (stroke only)
  .sp-segmented-group--variant-outlined .sp-segmented__thumb {
    background: transparent !important;
    box-shadow: none !important;
    outline: 2px solid var(--sp-segmented-color);
  }

  // solo: solid thumb + white ring for contrast on white bg
  .sp-segmented-group--variant-solo .sp-segmented__thumb {
    background: var(--sp-segmented-color);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.18), 0 6px 16px rgba(0, 0, 0, 0.12);
  }

  // outlined variant uses a hollow thumb (border only)
  .sp-segmented-group--variant-outlined .sp-segmented__thumb {
    background: transparent;
    box-shadow: none;
    outline: 2px solid var(--sp-segmented-color);
  }

  // Individual segmented item base
  .sp-segmented {
    border-radius: 9999px;
    padding: 0 6px;
    .sp-selctrl__wrapper {
      gap: 0;
    }
    // Remove input footprint inside item
    .sp-selctrl__input {
      width: 0;
      height: 0;
      padding: 0;
      margin: 0;
      overflow: hidden;
    }
    .sp-label {
      padding: 6px 12px;
    }

    // Remove hover background from outlined variant
    &.sp-selctrl--outlined:hover {
      background-color: transparent !important;
    }
    .sp-selctrl__input:hover::before {
      opacity: 0 !important;
    }
  }

  // Visually merge items with group/ thumb
  .sp-segmented.sp-selctrl {
    border-radius: 9999px;
    margin: 0;
    gap: 0; // override generic .sp-selctrl gap for segmented items
  }

  // Item appearance when used as outlined inside group
  .sp-segmented.sp-selctrl--outlined {
    border: none;
    background: transparent;
    padding: 0 4px;
    &:hover {
      background: transparent !important;
    }
  }

  // Unselected text uses currentColor (theme color)
  .sp-segmented .sp-label {
    color: currentColor !important;
  }

  // Selected text default (filled/solo): white
  .sp-segmented-group--variant-filled .sp-segmented.sp-selctrl--dirty .sp-label,
  .sp-segmented-group--variant-solo .sp-segmented.sp-selctrl--dirty .sp-label {
    color: #fff !important;
  }

  // Selected text for outlined: keep theme color
  .sp-segmented-group--variant-outlined .sp-segmented.sp-selctrl--dirty .sp-label {
    color: var(--sp-segmented-color) !important;
  }

  // In outlined variant, keep selected text with theme color (not white)
  .sp-segmented-group--variant-outlined .sp-segmented.sp-selctrl--dirty .sp-label {
    color: var(--sp-segmented-color) !important;
  }
}
